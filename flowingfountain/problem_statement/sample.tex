\documentclass{standalone}

\usepackage{times}
\usepackage{amsmath}
\usepackage{amssymb}

\usepackage[dvipsnames]{xcolor}
\usepackage{tikz}
\usetikzlibrary{arrows,calc}
\pgfdeclarelayer{background}
\pgfdeclarelayer{foreground}
\pgfsetlayers{background,main,foreground}

\usepackage{pgfplots}
\pgfplotsset{compat=1.15}

\definecolor{red}{HTML}{972e21}
\definecolor{yellow}{HTML}{ebb83f}
\definecolor{blue}{HTML}{5e7fbf}
\renewcommand{\seriesdefault}{\bfdefault}
\begin{document}
	\Large%
	\begin{tikzpicture}[x=1cm,y=1cm,line width=0.1cm,line join=round, line cap=round]
		\newcommand{\layer}[4]{
			\fill[yellow,opacity=0.5,rounded corners=0.05cm] (#1-0.5*#4,#2-0.5+0.5*#3/#4) rectangle (#1+0.5*#4,#2-0.5);
			\draw[blue!70,rounded corners=0.15cm] (#1-0.5*#4,#2) -- (#1-0.5*#4,#2-0.5) -- (#1+0.5*#4,#2-0.5) -- (#1+0.5*#4,#2);
			\node[anchor=south east,inner sep=1pt] at (#1,#2-0.5) {#3\,/\,#4};
		}
		\newcommand{\fountain}[5]{
			\draw[blue!70] (#1,3.5) -- (#1,-0.5);
			\layer{#1}{3}{#2}{2};
			\layer{#1}{2}{#3}{4};
			\layer{#1}{1}{#4}{3};
			\layer{#1}{0}{#5}{5};
		}
%		\newcommand{\bucket}[2]{
%			\begin{scope} [shift={(#1,#2)},rotate=55,scale=0.5]
%				\fill[black!50] (0,0) ellipse (1.1180339887498953cm and 0.5cm);
%				\fill[black!50] (0,-2) ellipse (0.8944271909999151cm and 0.4cm);
%				\fill[black!50] (-1.1166355717063663,-0.025) -- (-0.8933084573650913,-2.02) -- (0.8933084573650913,-2.02) -- (1.1166355717063663,-0.025) -- cycle;
%				\fill[black!75] (0,0) ellipse (1.05cm and 0.447213595499958cm);
%				
%				\draw[black!75,line width=0.4pt] (-0.965865622885434,-1.35) arc(180:360:0.968310545890731cm and 0.435201462868874cm);
%				\draw[black!75,line width=0.4pt] (-0.949116508037709,-1.5) arc(180:360:0.9515190335342454cm and 0.42765461669195726cm);
%				
%				\draw[black,line width=0.4pt] (0,0) ellipse (1.1180339887498953cm and 0.5cm);
%				\draw[black,line width=0.4pt] (-1.1166355717063663,-0.025) -- (-0.8933084573650913,-2.02);
%				\draw[black,line width=0.4pt] (0.8933084573650913,-2.02) -- (1.1166355717063663,-0.025);
%				\draw[black,line width=0.4pt] (-0.8944271412667,-2) arc (180:360:0.8944271909999151cm and 0.4cm);
%			\end{scope}
%		}
%		\node at (8,5.4) {};%fix bucket...
		\newcommand{\bucket}[2]{
			\node[shift={(0.66,0.22)},rotate=120] at (#1,#2) {\includegraphics[height=2cm]{bottle.pdf}};
		}
		
		%xpos, water1, water2, ...
		%\fountain{0}{0}{0}{0}{0}
		
		\node[black] at (7.25,4.7) {4};
		\draw[-stealth, yellow] (7.8,4.7) to[in=90,out=180] (7.3,3);
		\node[black] at (8.05,3.8) {2};
		\draw[-stealth, yellow] (7.6,3) to[in=90,out=90,looseness=2]  (8.5,3) -- (8.5,2-0.25);
		\bucket{8}{5}
		\fountain{7}{2}{2}{0}{0}
		
		\node[black] at (15.25,3.7) {3};
		\draw[-stealth, yellow] (15.8,3.7) to[in=90,out=180] (15.3,2);
		\node[black] at (15.95,2.65) {1};
		\draw[-stealth, yellow] (15.65,2) to[in=90,out=90,looseness=2]  (16.25,2) -- (16.25,-0.4);
		\bucket{16}{4}
		\fountain{14}{2}{4}{0}{1}
		
		\node[black] at (23.25,2.7) {4};
		\draw[-stealth, yellow] (23.8,2.7) to[in=90,out=180] (23.25,1.6) to[in=40,out=-90] (22.25,1);
		\node[black] at (19,1) {1};
		\draw[-stealth, yellow] (19.75,1) to[in=90,out=90,looseness=2]  (19.25,1) -- (19.25,-0.3);
		\bucket{24}{3}
		\fountain{21}{2}{4}{3}{2}
		
		\node[black] at (29.1,3.7) {10};
		\draw[-stealth, yellow] (29.8,3.7) to[in=90,out=180] (29.3,2);
		\node[black] at (29.95,2.7) {10};	
		\draw[-stealth, yellow] (29.65,2) to[in=90,out=90,looseness=2]  (30.25,2) -- (30.25,1.75) to[in=90,out=-90] (30,0);
		\node[black] at (30.65,0.75) {7};
		\draw[-stealth, yellow] (30.25,0) to[in=90,out=90,looseness=2]  (31,0) -- (31,-0.5);
		\bucket{30}{4}
		\fountain{28}{2}{4}{3}{5}
	\end{tikzpicture}
\end{document} 
